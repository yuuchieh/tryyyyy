<!-- Developed by Taipei Urban Intelligence Center 2023 -->

<script setup>
import { computed, defineProps, ref } from 'vue';
import { useMapStore } from '../../store/mapStore';

const props = defineProps(['chart_config', 'activeChart', 'series', 'map_config']);
const mapStore = useMapStore();

const targetDistrict = ref(null);
const districtColor = ref(props.chart_config.color[0]);
const mousePosition = ref({ x: null, y: null });
const selectedIndex = ref(null);

// Parse District Data (to support 2D or 3D data)
const districtData = computed(() => {
	let output = {};
	let highest = 0;
	let sum = 0;
	if (props.series.length === 1) {
		props.series[0].data.forEach((item) => {
			output[item.x] = item.y;
			if (item.y > highest) {
				highest = item.y;
			}
			sum += item.y;
		});
	} else {
		props.series.forEach((serie) => {
			for (let i = 0; i < 12; i++) {
				if (!output[props.chart_config.categories[i]]) {
					output[props.chart_config.categories[i]] = 0;
				}
				output[props.chart_config.categories[i]] += +serie.data[i];
			}
		});
		highest = Object.values(output).sort(function (a, b) { return b - a; })[0];
		sum = Object.values(output).reduce((partialSum, a) => partialSum + a, 0);
	}

	output.highest = highest;
	output.sum = sum;
	return output;
});
const tooltipPosition = computed(() => {
	return { 'left': `${mousePosition.value.x - 10}px`, 'top': `${mousePosition.value.y - 54}px` };
});

function toggleActive(e) {
	targetDistrict.value = e.target.dataset.name;
}
function toggleActiveToNull() {
	targetDistrict.value = null;
}
function updateMouseLocation(e) {
	mousePosition.value.x = e.pageX;
	mousePosition.value.y = e.pageY;
}

function handleDataSelection(index) {
	if (!props.chart_config.map_filter) {
		return;
	}
	if (index !== selectedIndex.value) {
		mapStore.addLayerFilter(`${props.map_config[0].index}-${props.map_config[0].type}`, props.chart_config.map_filter[0], props.chart_config.map_filter[1][index]);
		selectedIndex.value = index;
	} else {
		mapStore.clearLayerFilter(`${props.map_config[0].index}-${props.map_config[0].type}`);
		selectedIndex.value = null;
	}
}
</script>

<template>
	<div v-if="activeChart === 'TaoyuanChart'" class="Taoyuanchart">
		<div class="Taoyuanchart-title">
			<h5>總合</h5>
			<h6>{{ districtData.sum }} {{ chart_config.unit }}</h6>
			<div class="Taoyuanchart-title-legend">
				<p>多</p>
				<div :style="{ backgroundColor: props.chart_config.color[0] }"></div>
				<p>少</p>
			</div>
		</div>
		<div class="Taoyuanchart-chart">
			<svg viewBox="0 0 550 650" xmlns="http://www.w3.org/2000/svg">
				<g>
					<path data-name="復興區"
					 	:class="{ 'active-district': targetDistrict === '復興區' || selectedIndex === 1, 'initial-animation-2': true }"
						@mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
						@click="handleDataSelection(1)" :fill-opacity="districtData['復興區'] / districtData.highest"
						:fill="districtColor"
						d="
M349.035767,294.021942 
	C351.596069,293.989471 354.309448,294.494537 356.686310,293.817719 
	C362.444122,292.178253 365.759277,293.705933 370.256012,297.650635 
	C373.206970,300.239319 378.600433,299.965424 381.728058,302.449249 
	C386.495209,306.235077 390.172913,304.518616 394.176605,302.011230 
	C395.324829,301.292145 396.409180,300.240173 397.115021,299.090454 
	C398.955322,296.093018 404.761993,294.011536 407.940186,295.406250 
	C408.950287,295.849518 410.006104,296.699554 410.984100,296.624268 
	C418.721924,296.028625 422.230316,299.033936 424.135620,306.568451 
	C424.979462,309.905426 425.387207,314.964752 431.439117,314.065369 
	C432.154999,313.958923 433.256592,315.891357 434.049988,316.973572 
	C435.975739,319.600281 437.291870,323.738159 439.808899,324.660645 
	C446.435272,327.089294 445.898956,332.270782 446.089172,337.244629 
	C446.388428,345.069794 449.124664,348.815002 456.953491,350.867828 
	C456.784393,352.096375 457.082672,353.854126 456.358337,354.554932 
	C451.626465,359.133118 446.670929,363.480072 441.793030,367.907532 
	C439.136383,370.318878 436.078308,372.426331 433.934387,375.231232 
	C430.827637,379.295746 435.243500,382.520416 436.129852,386.127808 
	C438.185486,394.494232 440.724701,402.743378 443.154755,411.014557 
	C443.496613,412.178101 444.054352,413.636078 444.977112,414.209045 
	C448.950745,416.676422 450.067200,420.803223 451.770508,424.690765 
	C453.638214,428.953491 455.454956,433.346497 458.102814,437.114227 
	C459.441559,439.019165 462.581207,439.639984 464.876892,440.895752 
	C467.569305,442.368530 470.070587,444.409332 472.935699,445.303650 
	C479.441071,447.334229 481.058594,451.219574 480.428162,457.864594 
	C480.081512,461.518402 482.904297,465.472870 484.600800,470.121246 
	C480.405548,470.628540 475.797302,472.171021 471.576691,471.448639 
	C466.208405,470.529877 464.578979,473.669983 462.479034,476.986298 
	C461.701904,478.213593 461.278809,479.810516 460.234650,480.698456 
	C455.240692,484.945282 454.903198,487.311554 457.094574,493.025970 
	C457.800873,494.867859 456.282837,497.651093 455.550232,499.929047 
	C454.940063,501.826355 453.971680,503.606659 453.197388,505.453644 
	C452.713928,506.606995 452.641571,508.269165 451.792877,508.878204 
	C446.389313,512.755920 444.258850,518.041626 443.756042,524.505920 
	C443.579437,526.776184 441.705627,528.915100 440.604095,531.112610 
	C439.800323,532.716125 438.752472,534.242737 438.225922,535.932190 
	C435.409576,544.968567 431.532990,546.919556 422.893494,543.437500 
	C418.074066,550.933289 412.071747,557.143433 403.672729,560.643188 
	C402.936279,560.950134 401.852448,561.245056 401.252960,560.930359 
	C396.053040,558.200317 390.878296,555.412781 385.809662,552.448120 
	C384.349335,551.593933 383.053528,550.258301 382.044983,548.878357 
	C380.485443,546.744568 379.089111,544.458069 377.896027,542.098511 
	C376.441742,539.222412 375.006256,536.282776 374.083099,533.214050 
	C373.599396,531.606079 373.866333,529.535400 374.443176,527.902954 
	C375.229553,525.677612 376.939514,523.777893 377.719940,521.551514 
	C380.292633,514.212158 379.718109,513.330566 373.246185,511.713409 
	C370.934326,508.123230 368.354492,505.541931 367.547516,502.491608 
	C366.605591,498.931122 367.048798,494.955048 367.188019,491.170197 
	C367.358154,486.545044 367.836700,481.931213 368.173462,477.424927 
	C363.598969,476.758240 359.425140,476.149933 354.821259,475.478973 
	C355.900360,466.676727 351.838715,459.598969 345.904297,453.805939 
	C342.244904,450.233734 337.497406,447.623291 332.887024,445.269348 
	C331.465149,444.543427 328.798065,445.872894 326.859375,446.653992 
	C325.032257,447.390167 323.507568,448.904175 321.666687,449.568604 
	C320.611694,449.949371 318.967834,449.655823 318.017944,449.022552 
	C317.418396,448.622894 317.216339,446.905853 317.513489,446.002563 
	C319.105042,441.164642 320.923615,436.401855 322.636780,431.603424 
	C324.633209,426.011383 325.713623,419.493042 320.864410,415.818146 
	C314.687836,411.137360 316.133362,406.387115 318.134857,401.134460 
	C319.963318,396.335938 322.397522,391.768280 324.403046,387.447266 
	C322.378265,384.454407 320.746796,382.034332 319.104279,379.621796 
	C318.732605,379.075806 318.437958,378.301483 317.912384,378.062988 
	C311.683960,375.236664 305.372253,372.590485 299.182281,369.684265 
	C296.126587,368.249603 291.778046,367.043915 290.665833,364.551483 
	C288.709900,360.168365 285.160370,359.668182 281.768005,358.406586 
	C278.675781,357.256653 277.402283,356.108246 279.414795,352.678589 
	C281.564392,349.015228 280.145142,346.994843 275.967346,345.891876 
	C271.285187,344.655731 265.911987,343.947906 267.548309,336.585968 
	C267.857880,335.193298 266.114014,333.344208 265.602844,331.332642 
	C269.241852,330.077606 272.240875,328.908783 274.984192,333.011139 
	C276.014526,334.551880 280.139160,334.661865 282.664642,334.254883 
	C283.696838,334.088531 284.232147,330.823517 284.988556,328.966217 
	C285.493347,327.726624 285.938934,325.428864 286.496826,325.402222 
	C293.329102,325.075897 300.325775,321.283081 306.991577,326.022156 
	C307.002502,326.001404 306.961365,326.023743 307.079407,326.322205 
	C308.123566,327.094879 309.049713,327.569061 309.989227,328.022766 
	C310.002594,328.002258 309.957825,328.021820 310.003876,328.291565 
	C310.360809,328.721680 310.671661,328.882019 310.991272,329.021057 
	C311.000000,328.999725 310.962036,329.025909 311.104553,329.360901 
	C315.141541,333.454559 319.733734,330.623932 323.991638,331.022552 
	C324.001587,331.000732 323.962189,331.027954 324.080505,331.341858 
	C324.792389,331.788025 325.385956,331.920319 325.987579,332.025330 
	C325.995667,331.998108 325.952850,332.035522 325.869019,332.388000 
	C331.077881,337.797058 334.677612,337.763611 337.300018,331.798126 
	C338.398987,329.298218 337.352783,325.748566 336.937653,322.723389 
	C336.601501,320.274170 335.892914,319.117981 339.728394,318.514191 
	C342.932343,318.009796 345.619263,314.114105 348.462341,311.636688 
	C348.680298,311.446747 348.286957,310.595917 348.233337,310.046875 
	C347.947449,307.118073 347.382202,304.175903 347.496735,301.261230 
	C347.592163,298.831726 348.492126,296.433838 349.035767,294.021942 
z"/>
						<path data-name="大溪區"
      					:class="{ 'active-district': targetDistrict === '大溪區' || selectedIndex === 2, 'initial-animation-3': true }"
      					@mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      					@click="handleDataSelection(2)" :fill-opacity="districtData['大溪區'] / districtData.highest"
      					:fill="districtColor"
	  					d="M331.974548,197.089172 C334.057129,200.048996 336.139740,203.008820 338.427399,206.260056 C342.134308,205.953018 346.701904,205.574692 351.269501,205.196350 C351.525085,206.010208 351.780670,206.824066 352.036224,207.637924 C344.498322,209.061783 336.718048,210.098938 333.145447,218.683960 C335.371002,221.214691 337.933899,224.128983 340.595245,227.155228 C340.045685,230.546692 333.126068,232.303268 337.163147,236.878494 C339.631836,239.676270 343.357758,242.232025 347.670868,235.817291 C347.285675,238.630020 347.121368,239.613464 347.020874,240.603378 C346.697357,243.788773 347.442535,245.765396 351.152374,244.011185 C353.695923,242.808456 353.940125,244.179413 355.224670,246.213104 C357.928772,250.494156 357.491577,256.845215 363.961273,258.906647 C367.505768,260.036011 367.464325,263.794556 364.357666,266.045593 C362.802185,267.172668 360.999908,267.959137 359.427399,268.833923 C358.040497,276.814087 366.679871,278.062164 370.035736,284.720673 C365.100281,286.036835 360.725586,287.531067 356.226868,288.293945 C352.944397,288.850555 350.572723,290.254059 348.056274,293.143982 C346.583740,298.613739 345.510101,303.773132 345.077942,308.985718 C344.759857,312.821869 342.218475,314.944916 339.472534,315.892334 C334.799652,317.504669 333.993591,318.513977 335.205139,323.447693 C335.802368,325.879852 336.158356,328.887787 335.255859,331.069397 C333.040710,336.424194 329.275696,333.519043 325.952850,332.035522 C325.952850,332.035522 325.995667,331.998108 325.865967,331.727081 C325.144897,331.313354 324.553558,331.170654 323.962189,331.027954 C323.962189,331.027954 324.001587,331.000732 323.967285,330.638062 C319.609314,329.858887 315.285675,329.442413 310.962036,329.025909 C310.962036,329.025909 311.000000,328.999725 310.977936,328.729431 C310.623199,328.313354 310.290497,328.167572 309.957825,328.021820 C309.957825,328.021820 310.002594,328.002258 310.000000,327.658447 C308.985382,326.884369 307.973389,326.454041 306.961365,326.023743 C306.961365,326.023743 307.002502,326.001404 307.012787,325.640808 C305.181366,324.193329 303.343414,322.200897 301.497223,322.193298 C296.438049,322.172394 291.366577,322.910522 286.317932,323.501953 C283.852356,323.790771 282.718262,325.144867 282.857971,327.909821 C282.940887,329.551086 281.860718,331.251099 281.303497,332.924713 C279.260712,332.180908 276.585968,331.997406 275.317627,330.566925 C273.216248,328.196960 271.442169,327.541412 268.471771,328.618927 C266.622986,329.289520 263.954498,329.993256 263.947266,326.196625 C264.024353,326.048828 264.239319,325.794006 264.445618,325.557983 C265.095215,323.870605 265.538513,322.419250 265.991089,320.984985 C266.000336,321.002045 265.964325,320.986969 266.326233,320.991486 C267.120392,319.986237 267.552643,318.976440 267.993073,317.983948 C268.001221,318.001221 267.966644,317.984833 268.340149,318.053497 C275.583099,315.687408 274.099365,308.960999 275.994690,303.984253 C276.002869,304.002014 275.964569,303.994232 276.252991,303.973877 C276.690521,303.624084 276.839661,303.294708 276.994446,302.984131 C277.000122,303.002930 276.965271,302.984650 277.324646,303.006317 C279.116608,300.007874 280.549225,296.987793 281.990814,293.984833 C281.999786,294.001953 281.965057,293.984741 282.325684,294.006897 C286.818054,291.231293 288.164337,287.476562 285.742584,283.045197 C284.175934,280.178528 281.990601,277.631561 279.935883,275.058441 C279.017059,273.907837 277.133606,272.003693 276.730988,272.237518 C275.256012,273.094147 274.219330,274.705475 273.009399,276.015198 C273.001221,275.997803 273.033447,276.019470 272.662781,275.955688 C270.865417,276.606964 269.438721,277.321991 268.007812,278.019745 C268.003662,278.002441 268.017029,278.040466 267.722717,277.788788 C267.317810,276.410980 266.835999,275.165497 267.153839,274.177185 C270.432343,263.982727 270.374054,253.518082 269.983582,242.656799 C270.475433,240.947693 270.882324,239.589325 271.595276,238.096603 C272.792053,231.011154 273.276611,223.933380 278.448059,218.168671 C279.883423,217.411804 280.937408,216.684967 281.998322,215.980347 C282.005249,216.002548 281.959106,215.996765 282.245850,215.969482 C282.686127,215.615051 282.839630,215.287918 282.998352,214.982208 C283.003540,215.003662 282.960693,214.993017 283.247131,214.966827 C283.686493,214.613953 283.839447,214.287292 283.996704,213.981628 C284.001038,214.002609 283.962982,213.983017 284.339325,214.049332 C285.803619,212.398193 286.891571,210.680756 287.990601,208.981781 C288.001678,209.000259 287.960632,208.987350 288.248840,208.969116 C288.686340,208.620819 288.835663,208.290771 288.991577,207.981995 C288.998169,208.003265 288.960114,207.980011 289.367737,208.013336 C295.356262,207.329727 293.065765,212.651108 295.548981,215.745667 C299.251282,214.653198 303.236664,213.414001 307.260284,212.314667 C309.517731,211.697876 311.984650,211.645477 314.086365,210.722275 C315.916779,209.918259 317.367035,208.248932 318.995361,206.981445 C319.005493,207.000916 318.961609,207.001328 319.288971,206.882996 C319.745331,206.331177 319.874298,205.897675 320.043762,205.356125 C320.084259,205.248077 320.463165,205.002869 320.813385,204.987946 C321.441132,204.635834 321.718658,204.298630 321.998291,203.983292 C322.000397,204.005157 321.960785,203.986038 322.250427,203.968048 C322.688690,203.620331 322.837280,203.290573 322.993652,202.981171 C323.001434,203.001511 322.960815,202.985931 323.250610,202.968185 C323.688904,202.620560 323.837402,202.290695 323.995544,201.980560 C324.005157,202.000275 323.961456,201.996246 324.293732,201.880981 C324.750916,201.328415 324.875824,200.891144 325.144043,200.247757 C326.021027,199.359116 326.754700,198.676575 327.877869,198.073334 C329.503143,197.798157 330.738831,197.443665 331.974548,197.089172z"/>
					<path data-name="觀音區"
      					:class="{ 'active-district': targetDistrict === '觀音區' || selectedIndex === 3, 'initial-animation-4': true }"
      					@mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      					@click="handleDataSelection(3)" :fill-opacity="districtData['觀音區'] / districtData.highest"
      					:fill="districtColor"
	  d="
M58.041664,122.969261 
	C56.780670,122.888809 55.519676,122.808365 53.999577,122.711380 
	C59.526192,112.628342 65.113861,103.120728 74.252518,96.260818 
	C75.787338,95.108704 76.760315,93.201622 77.973045,91.628075 
	C83.114326,84.957123 90.167313,81.975754 98.182594,79.973160 
	C104.005661,78.518280 109.451630,75.465843 114.948563,72.876915 
	C115.914886,72.421806 116.119888,70.557907 117.001106,69.664963 
	C118.274193,68.374947 119.745499,67.211472 121.306046,66.287636 
	C125.371391,63.880974 129.316513,61.050629 133.695816,59.438267 
	C144.707993,55.383827 155.917999,51.861237 167.081894,48.227505 
	C170.692871,47.052181 174.407120,46.194183 178.500946,45.543297 
	C178.609680,47.931950 178.291580,49.968330 177.989822,52.005463 
	C178.006149,52.006214 178.002335,51.973732 177.680817,51.882729 
	C177.573639,52.871212 177.787964,53.950706 178.004944,55.012012 
	C178.007599,54.993824 177.970871,54.995148 177.998947,55.339630 
	C179.008835,57.457123 179.990631,59.230133 180.989838,61.004494 
	C181.007263,61.005836 181.003799,60.971077 180.623230,61.045143 
	C179.831970,62.453320 178.955856,63.834766 179.085983,65.113853 
	C179.939590,73.504791 184.033401,80.322548 190.027176,86.635681 
	C188.094543,90.263741 186.033325,94.133217 183.988708,98.003403 
	C184.005295,98.004120 183.996445,97.972122 183.670319,98.071625 
	C183.086563,99.003197 182.475067,100.488678 182.624329,100.569519 
	C184.925720,101.816040 184.637863,103.456253 184.577454,105.850014 
	C184.446243,111.049118 185.098190,116.328682 185.988770,121.478722 
	C187.341354,129.300461 189.168716,137.040115 190.514832,145.008926 
	C189.253799,146.726944 188.192749,148.205994 187.307434,149.783661 
	C185.440567,153.110382 183.665741,156.488754 181.561127,160.015457 
	C180.565521,160.893524 179.807678,161.556503 179.167923,162.318619 
	C176.675018,165.288345 174.484741,170.682556 170.853149,163.204056 
	C170.703537,162.895920 169.955231,162.830185 169.469421,162.741150 
	C164.773300,161.880615 161.824631,159.074631 160.122086,154.684265 
	C159.837143,153.949478 158.716766,153.538681 157.991623,152.988846 
	C158.000839,152.999512 158.020935,153.019318 158.006958,152.622086 
	C157.175247,147.592346 153.715134,143.105270 157.643707,138.166565 
	C158.163437,137.513168 156.766525,134.792389 155.642731,133.616211 
	C155.124329,133.073639 153.068909,133.788757 151.810913,134.224106 
	C150.595932,134.644577 149.514236,135.969681 148.367096,135.978302 
	C142.860092,136.019684 140.987411,140.044693 138.988434,144.009338 
	C138.998444,144.000290 139.017487,143.981186 138.665314,143.922012 
	C136.875000,141.626038 135.516022,139.332352 133.966461,137.175629 
	C133.150421,136.039841 132.001450,135.143265 130.618576,134.123871 
	C128.779587,133.279953 127.291725,132.503204 125.877724,131.609604 
	C123.688675,130.226196 120.829208,127.078018 119.520203,127.637985 
	C114.916481,129.607391 112.420204,125.916603 108.994202,124.988510 
	C109.001106,124.998589 109.019890,125.014221 108.962555,124.642006 
	C103.845169,120.635712 101.762634,125.469406 98.788315,128.278946 
	C97.072350,125.905655 95.908394,123.413506 93.997169,121.814590 
	C87.759682,116.596375 80.744095,113.599113 72.337746,112.715691 
	C66.855812,112.139587 63.829384,113.061325 61.988472,118.007584 
	C61.998383,117.998444 62.013180,117.975899 61.718952,118.055542 
	C60.926689,118.980392 60.428654,119.825592 59.668293,120.848679 
	C58.924900,121.691399 58.443832,122.356232 57.982525,123.008171 
	C58.002289,122.995285 58.041664,122.969261 58.041664,122.969261 
z"/>
						<path data-name="楊梅區"
      :class="{ 'active-district': targetDistrict === '楊梅區' || selectedIndex === 4, 'initial-animation-5': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(4)" :fill-opacity="districtData['楊梅區'] / districtData.highest"
      :fill="districtColor"
	  d="
M183.159912,260.755157 
	C182.705917,256.992737 181.184784,254.794067 176.789963,254.973770 
	C173.202896,255.120453 169.570709,253.976913 165.969482,254.039185 
	C164.054642,254.072266 162.046951,256.309784 160.281479,256.071014 
	C153.422852,255.143463 146.598068,253.816208 139.864380,252.204514 
	C137.823395,251.716003 136.829254,250.051041 137.704926,247.146088 
	C138.606476,244.155289 137.905106,240.681290 137.905106,236.609665 
	C134.049622,238.042313 131.746552,238.898743 129.443024,239.753937 
	C124.102257,241.736679 119.064201,242.314224 114.566360,237.606628 
	C113.651253,236.648849 111.613167,236.724274 110.075058,236.410034 
	C107.205643,235.823776 104.159752,235.713562 101.485207,234.653595 
	C97.637093,233.128510 94.055199,230.931702 88.942619,228.289169 
	C89.425514,225.236954 90.309456,220.871368 90.742973,216.461502 
	C91.012390,213.720947 90.716446,210.902588 90.463120,208.138504 
	C90.151329,204.736343 89.619804,201.354294 89.636780,197.436554 
	C91.682281,196.600418 93.314369,195.899872 94.858406,196.058167 
	C98.903923,196.472870 101.128746,195.526077 101.930748,190.926392 
	C102.300865,188.803696 105.019707,186.341843 107.233887,185.489914 
	C109.680328,184.548615 112.768402,185.274902 115.898071,185.274902 
	C115.706512,184.400665 115.503960,183.660278 115.385857,182.906662 
	C114.724358,178.685883 116.202667,177.684982 120.320122,178.955948 
	C122.764397,179.710434 125.451790,179.677292 128.012299,180.002380 
	C127.994713,180.006485 127.995377,179.970383 128.043793,180.243195 
	C128.404678,180.678818 128.717133,180.841629 129.011475,181.005096 
	C128.993362,181.005737 129.000015,180.970108 129.010773,181.296082 
	C129.690506,182.419510 130.359467,183.216965 131.008255,184.011841 
	C130.988068,184.009247 130.994095,183.969009 131.006317,184.321594 
	C134.191559,189.051361 138.468857,190.204391 141.401901,187.948135 
	C143.263000,186.516495 145.697754,185.795029 147.930862,184.892792 
	C150.048462,184.037216 152.238586,183.361084 154.396805,182.606033 
	C154.278687,182.273773 154.160583,181.941513 154.042465,181.609253 
	C158.038651,182.406693 162.034821,183.204117 166.011810,184.005859 
	C165.992630,184.010147 165.987701,183.971130 166.093521,184.305450 
	C168.743454,185.452942 172.182251,187.679993 173.631439,186.762924 
	C176.082214,185.212036 177.274643,181.672668 178.999878,178.986725 
	C179.003632,179.004089 178.968964,178.996185 179.356674,179.093201 
	C186.226105,177.618042 192.707840,176.045868 197.698181,174.835434 
	C200.834106,181.159363 203.318924,186.170319 205.919617,191.545868 
	C207.402634,197.128067 208.994675,202.300583 210.052948,207.580109 
	C210.692566,210.771088 210.793182,214.142181 210.634201,217.407913 
	C210.121307,227.944260 210.338409,238.752304 201.988678,247.006378 
	C201.994736,246.994919 202.015457,246.979370 201.677063,247.117737 
	C199.676346,252.269989 198.014008,257.283875 196.046387,263.218567 
	C192.515610,262.543610 187.837769,261.649384 183.159912,260.755157 
z"/>
						<path data-name="大園區"
      :class="{ 'active-district': targetDistrict === '大園區' || selectedIndex === 5, 'initial-animation-6': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(5)" :fill-opacity="districtData['大園區'] / districtData.highest"
      :fill="districtColor"
	  d="
M180.614059,44.921356 
	C186.563965,41.438824 192.349731,37.628540 198.500992,34.548061 
	C208.550476,29.515398 218.761993,24.785097 229.052704,20.262997 
	C235.629196,17.373055 242.412857,14.915281 249.219833,12.606275 
	C252.450546,11.510374 255.953018,11.215565 259.733124,10.479842 
	C259.873138,8.866091 260.037933,6.966943 260.098846,6.264826 
	C262.111481,6.815483 264.156525,7.375012 266.667114,8.277230 
	C268.087158,9.422439 269.041687,10.224957 270.000854,11.011940 
	C270.005554,10.996403 269.973114,10.996600 269.931976,11.403912 
	C270.582367,15.137319 270.899445,18.600449 272.054626,21.756847 
	C273.716583,26.298048 275.988342,30.616081 278.001862,35.012375 
	C278.003906,34.995388 277.970734,35.003670 278.081451,35.329895 
	C279.714630,37.987350 281.600037,40.165321 282.665741,42.689396 
	C283.938385,45.703693 285.671295,47.356491 289.005646,47.010792 
	C289.004700,46.993153 288.970856,47.003147 289.091370,47.355350 
	C290.870972,50.511887 289.821747,53.386421 287.192017,53.605068 
	C283.788452,53.888046 282.942566,56.071667 281.532806,58.101791 
	C279.962006,60.363815 278.488129,62.693146 276.987244,64.997940 
	C277.002441,65.002701 276.994873,64.971718 276.653625,65.016533 
	C274.835968,65.396034 273.324097,65.623611 271.893646,66.097076 
	C270.596283,66.526459 268.931061,66.898811 268.237946,67.872711 
	C266.928345,69.712807 266.200165,71.966690 265.725098,72.986534 
	C265.007904,76.584511 265.061615,81.220673 263.846649,81.581161 
	C257.817749,83.370033 255.667389,87.442749 254.988052,92.998711 
	C255.003632,93.001610 254.992096,92.972084 254.660828,93.145767 
	C253.589050,95.536354 252.848526,97.753242 252.070419,100.082664 
	C253.726166,101.409714 255.359726,102.718971 256.998474,104.012619 
	C257.003662,103.997009 256.971069,104.001694 256.948425,104.368568 
	C257.950317,106.166924 258.974823,107.598404 260.002228,109.012466 
	C260.005127,108.995056 259.970184,109.000328 259.994995,109.338257 
	C260.677917,110.126564 261.336029,110.576935 261.999451,111.012177 
	C262.004730,110.997055 261.972778,110.998512 261.875366,111.368469 
	C262.819580,113.939430 263.861206,116.140419 264.983154,118.511108 
	C258.859680,120.777367 252.832886,123.007843 245.984039,125.542549 
	C242.954376,121.052673 245.926376,115.643333 246.736603,111.276192 
	C244.057144,110.830788 242.049896,110.230690 240.049362,110.252304 
	C238.558777,110.268410 237.076904,111.088852 235.387497,111.685455 
	C234.925385,112.028549 234.718582,112.279778 234.267838,112.741287 
	C233.362991,113.571198 232.753754,114.233360 231.377213,115.729492 
	C230.327789,108.147896 228.809204,101.547104 219.323181,104.234970 
	C218.111115,104.538200 216.703995,104.890450 216.050888,105.790085 
	C214.449936,107.995354 213.196777,110.453117 211.545624,112.589172 
	C209.840225,108.547272 208.392883,104.725494 206.945541,100.903717 
	C206.415268,101.030663 205.885010,101.157608 205.354736,101.284554 
	C204.842239,103.121948 204.329758,104.959343 203.577942,106.782700 
	C203.036911,106.668106 202.733978,106.571457 202.259521,106.155418 
	C199.843185,99.447823 193.963730,102.205246 189.851746,101.602356 
	C186.834213,101.159935 185.093643,100.627693 183.996445,97.972122 
	C183.996445,97.972122 184.005295,98.004120 184.342331,98.068558 
	C186.967194,94.577263 189.320755,91.060722 191.484924,87.431244 
	C191.895996,86.741844 191.864441,84.938583 191.516251,84.777901 
	C188.044800,83.175835 187.668793,79.071823 185.690536,77.105362 
	C180.761917,72.206123 181.444153,66.631660 181.003799,60.971077 
	C181.003799,60.971077 181.007263,61.005836 181.324585,61.075310 
	C182.683807,57.624760 182.268173,56.928509 177.970871,54.995148 
	C177.970871,54.995148 178.007599,54.993824 178.114838,54.639515 
	C178.148834,53.514713 178.075577,52.744225 178.002335,51.973732 
	C178.002335,51.973732 178.006149,52.006214 178.387878,52.001617 
	C182.601044,50.476963 180.630646,47.444500 180.614059,44.921356 
z"/>
						<path data-name="新屋區"
      :class="{ 'active-district': targetDistrict === '新屋區' || selectedIndex === 6, 'initial-animation-7': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(6)" :fill-opacity="districtData['新屋區'] / districtData.highest"
      :fill="districtColor"
	  d="
M87.811493,196.885956 
	C85.365189,195.995102 81.961983,195.811523 80.671867,194.066086 
	C77.989586,190.437103 74.640991,188.485291 70.554512,188.315857 
	C66.722733,188.156998 62.400970,188.214569 59.107944,189.832199 
	C55.615044,191.548004 50.251312,192.881332 46.856232,190.725601 
	C44.615002,189.302505 42.253857,188.068268 39.714119,186.616714 
	C38.081482,188.934326 36.760136,190.810043 35.438786,192.685776 
	C35.295116,192.366974 35.151447,192.048187 35.007778,191.729385 
	C31.546888,193.357269 28.086000,194.985138 24.176811,196.823883 
	C22.962133,195.976501 20.761971,194.441635 18.445210,192.825424 
	C20.028906,185.965744 24.685989,180.982162 30.225420,176.546875 
	C31.720375,175.349899 32.883984,173.643539 33.925407,171.997452 
	C35.606483,169.340332 36.632019,166.149445 38.698734,163.880066 
	C43.033440,159.120300 44.659271,153.847504 44.422276,147.466827 
	C44.324924,144.845749 46.197952,142.151398 47.175171,139.490540 
	C48.244358,136.579239 49.821674,133.743134 50.265320,130.739517 
	C50.940636,126.167419 52.609745,123.314987 57.862984,123.325462 
	C58.041664,122.969261 58.002289,122.995285 58.294582,123.099693 
	C59.058357,122.803703 59.529839,122.403305 60.302010,121.830551 
	C61.072857,120.430763 61.543018,119.203331 62.013180,117.975899 
	C62.013180,117.975899 61.998383,117.998444 62.349018,118.081642 
	C64.641411,116.790527 66.738297,114.083488 68.496262,114.288124 
	C74.097549,114.940125 80.030144,115.764008 84.969864,118.244118 
	C90.046028,120.792732 94.105232,125.366867 99.367661,129.675354 
	C99.549828,129.596924 102.095062,129.230545 102.347069,128.265396 
	C103.399124,124.236122 106.383842,125.183525 109.019890,125.014221 
	C109.019890,125.014221 109.001106,124.998589 108.888351,125.344078 
	C111.211380,127.392555 114.635559,131.078064 115.906403,130.444473 
	C120.613586,128.097641 122.282249,131.834732 125.123962,133.477386 
	C126.911659,134.510742 129.036316,134.961182 131.297913,135.913666 
	C132.805130,138.782822 133.813171,141.539886 135.310043,143.999451 
	C136.510147,145.971359 137.639633,145.797638 139.017487,143.981186 
	C139.017487,143.981186 138.998444,144.000290 139.341049,144.060608 
	C142.599960,139.294128 147.946960,138.216248 152.474335,135.895233 
	C153.232330,135.506638 154.243607,135.612122 155.137848,135.489319 
	C155.026306,136.462936 155.136292,137.531677 154.765991,138.394211 
	C152.861053,142.831497 154.392822,149.963074 158.020935,153.019318 
	C158.020935,153.019318 158.000839,152.999512 157.928726,153.358124 
	C158.827759,155.630234 159.349960,158.069717 160.856659,159.355774 
	C164.914062,162.819031 169.103149,166.344452 173.792191,168.783707 
	C177.639435,170.785110 182.279495,171.262451 186.701416,172.609161 
	C187.026672,173.057678 187.259567,173.266830 187.574921,173.756104 
	C184.733963,175.719925 181.851471,177.358063 178.968964,178.996185 
	C178.968964,178.996185 179.003632,179.004089 178.656219,179.022598 
	C177.095657,180.302811 175.606125,181.398575 174.728012,182.861404 
	C173.001297,185.737823 171.215897,186.976562 168.245193,184.418884 
	C167.739243,183.983276 166.752380,184.106232 165.987701,183.971130 
	C165.987701,183.971130 165.992630,184.010147 166.007568,183.626831 
	C162.004684,181.956345 158.004562,180.607132 153.949905,179.448853 
	C153.340958,179.274887 151.908737,179.881485 151.822174,180.318237 
	C151.218536,183.363510 148.676743,182.041412 147.018631,182.714310 
	C144.634186,183.681946 142.318253,184.861694 140.081665,186.140778 
	C136.306671,188.299622 133.925064,185.080902 130.994095,183.969009 
	C130.994095,183.969009 130.988068,184.009247 131.105362,183.648773 
	C130.481781,182.515564 129.740891,181.742828 129.000015,180.970108 
	C129.000015,180.970108 128.993362,181.005737 129.033707,180.689529 
	C128.714493,180.239014 128.354935,180.104691 127.995377,179.970367 
	C127.995377,179.970383 127.994713,180.006485 128.013092,179.603210 
	C125.414772,178.516617 122.628860,178.194748 120.220062,177.067245 
	C116.375824,175.267853 114.913521,177.272308 113.236542,180.186020 
	C112.344711,181.735550 110.537033,183.697144 109.040413,183.788055 
	C104.004402,184.093948 100.953339,186.386780 99.741089,190.981888 
	C99.404114,192.259232 97.339500,193.326462 95.846245,193.998611 
	C93.258965,195.163162 90.499016,195.944122 87.811493,196.885956 
z"/>
						<path data-name="龍潭區"
      :class="{ 'active-district': targetDistrict === '龍潭區' || selectedIndex === 7, 'initial-animation-8': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(7)" :fill-opacity="districtData['龍潭區'] / districtData.highest"
      :fill="districtColor"
	  d="
M262.146240,330.035706 
	C260.289246,331.445374 258.623505,333.341278 256.535156,334.162750 
	C252.282486,335.835571 247.801849,336.928894 242.705231,338.476562 
	C242.151810,335.625824 241.239761,332.621674 241.059158,329.574188 
	C240.826660,325.651031 238.742065,325.409363 236.061096,326.727112 
	C233.280548,328.093811 230.749374,329.967804 227.400803,332.063232 
	C227.056976,330.746643 226.258530,329.441559 226.528748,328.418762 
	C227.661972,324.129486 225.806473,321.963806 221.570023,321.626343 
	C219.351273,321.449585 217.258850,319.519501 215.136627,318.332489 
	C209.955231,315.434570 204.789719,312.508270 199.280930,309.403503 
	C201.075180,306.139374 198.891373,304.694061 195.405548,303.475952 
	C189.407532,301.380035 182.874603,299.945099 179.488449,293.582520 
	C179.085541,292.825409 178.264145,291.777649 178.502335,291.273987 
	C180.419861,287.219330 182.561508,283.271271 184.594711,279.270294 
	C185.075119,278.324921 185.883102,277.215179 185.721481,276.330688 
	C184.950821,272.112885 183.897827,267.946625 183.340485,263.523865 
	C188.995361,263.942749 194.255035,264.599823 198.567978,265.138641 
	C199.863068,259.218658 200.957031,254.322586 201.984772,249.412674 
	C202.147842,248.633560 202.012726,247.792038 202.015457,246.979370 
	C202.015457,246.979370 201.994736,246.994919 202.412308,247.100632 
	C206.952484,246.248917 212.048004,249.604950 214.772385,244.332535 
	C216.025955,246.020248 217.325180,248.768646 218.091812,248.627350 
	C221.286774,248.038467 224.321487,246.580063 227.706635,245.278870 
	C231.746567,245.117188 235.494812,245.117188 240.055542,245.117188 
	C240.209366,245.364975 240.969421,246.589325 241.429703,247.330780 
	C244.186691,246.064041 246.676178,244.920212 248.476257,244.093155 
	C250.673630,246.158203 252.269455,247.657944 254.081650,249.416367 
	C255.202744,249.454697 256.107483,249.234329 257.394989,248.972473 
	C260.421844,249.006516 263.771057,246.567245 265.005371,251.368622 
	C264.478363,254.700500 264.136749,257.673279 263.555115,260.877686 
	C263.223785,262.198212 263.132477,263.287048 263.041199,264.375916 
	C264.025452,263.915405 265.009735,263.454926 265.997009,262.997223 
	C266.000000,263.000000 265.995850,262.992310 266.320435,262.958923 
	C267.062897,263.030792 267.480835,263.136047 267.848694,263.638123 
	C267.530090,265.797821 267.385223,267.591003 266.961945,269.315887 
	C266.421387,271.518860 265.352539,273.627655 265.066711,275.848480 
	C264.730469,278.461395 265.270172,278.699371 268.017029,278.040466 
	C268.017029,278.040466 268.003662,278.002441 268.396240,278.097748 
	C270.203735,277.468536 271.618591,276.744019 273.033447,276.019470 
	C273.033447,276.019470 273.001221,275.997803 273.341431,275.905151 
	C274.886505,275.180298 276.091370,274.548126 276.487793,274.340118 
	C278.941559,276.807922 280.929474,278.527588 282.581482,280.525085 
	C286.388580,285.128357 284.735962,289.612335 281.965057,293.984741 
	C281.965057,293.984741 281.999786,294.001953 281.667725,294.107544 
	C279.878845,297.136993 278.422058,300.060822 276.965271,302.984650 
	C276.965271,302.984650 277.000122,303.002930 276.733459,303.044891 
	C276.299377,303.389313 276.131958,303.691772 275.964539,303.994232 
	C275.964569,303.994232 276.002869,304.002014 275.672119,304.130798 
	C272.883148,308.834625 270.424896,313.409729 267.966644,317.984833 
	C267.966644,317.984833 268.001221,318.001221 267.692871,318.102417 
	C266.911163,319.131409 266.437744,320.059204 265.964325,320.986969 
	C265.964325,320.986969 266.000336,321.002045 265.663269,321.121033 
	C264.963898,322.757996 264.601624,324.276001 264.239319,325.794006 
	C264.239319,325.794006 264.024353,326.048828 263.624878,326.226776 
	C262.865662,327.615051 262.505951,328.825378 262.146240,330.035706 
z"/>
						<path data-name="蘆竹區"
      :class="{ 'active-district': targetDistrict === '蘆竹區' || selectedIndex === 8, 'initial-animation-9': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(8)" :fill-opacity="districtData['蘆竹區'] / districtData.highest"
      :fill="districtColor"
	  d="
M268.736084,6.936323 
	C274.624939,5.094272 280.289307,2.898427 286.576660,6.499243 
	C289.595490,8.228137 293.563202,8.638426 297.159027,8.927937 
	C300.882019,9.227687 301.521759,11.526050 300.606537,13.967006 
	C299.453094,17.043449 301.176544,18.137718 302.998962,19.602266 
	C304.820526,21.066093 306.432343,22.827297 308.377228,24.085398 
	C309.300537,24.682682 310.921997,24.818884 311.988983,24.458582 
	C315.040680,23.428074 316.576538,24.002054 317.273743,27.432079 
	C317.554596,28.813980 319.322540,30.632809 320.701202,30.933140 
	C330.073547,32.974815 339.461182,34.525578 347.268829,41.032181 
	C349.684265,43.045097 353.579834,43.310383 356.823883,44.289131 
	C358.605774,44.826736 360.442108,45.183807 362.111877,46.593491 
	C360.548218,46.826809 358.984558,47.060127 357.252502,47.318569 
	C357.541992,48.574486 357.789886,49.649921 358.035278,50.714512 
	C354.085236,51.953945 351.678131,53.487923 357.325378,55.533283 
	C358.808319,56.070385 360.795929,55.214195 362.869995,55.792660 
	C361.839630,56.605976 360.809265,57.419292 359.618378,58.359329 
	C362.359375,59.387108 364.919830,60.347183 367.247955,61.635033 
	C359.142822,61.038792 352.118103,64.079514 345.227203,67.084869 
	C342.492065,68.277748 340.417511,70.985207 337.989441,73.259247 
	C337.963928,73.687599 337.991211,73.859810 338.007690,74.016632 
	C337.996887,74.001244 338.033478,74.009499 337.758911,74.055267 
	C337.329163,74.410728 337.173981,74.720413 337.009399,75.014893 
	C337.000000,74.999695 337.023956,75.026451 336.674133,74.952332 
	C335.217285,75.597229 334.110260,76.316254 333.000244,77.016472 
	C332.997284,76.997673 333.031006,77.015312 332.583862,77.000237 
	C329.377014,77.304581 325.487457,76.602692 324.087646,78.151329 
	C320.961060,81.610321 317.951477,80.444939 314.618774,79.750275 
	C313.271698,79.469490 311.926025,79.182014 310.133820,78.803383 
	C311.717834,82.157257 312.989014,84.815887 314.231110,87.488029 
	C315.456390,90.124054 316.652222,92.773758 317.591644,94.828362 
	C315.347900,96.515289 313.676086,97.772240 311.999878,99.012955 
	C311.995483,98.996704 312.028809,99.001152 311.730896,99.006989 
	C311.287781,99.351913 311.142578,99.691002 310.996277,100.012085 
	C310.995178,99.994087 311.030334,100.002235 310.680664,99.949066 
	C308.737732,100.742348 307.144470,101.588799 305.446350,102.490952 
	C304.261078,100.734489 303.093262,99.003883 301.837494,97.142982 
	C294.283112,97.695915 293.173401,105.093834 289.128937,109.317413 
	C288.682159,109.783966 289.013184,111.296989 289.363953,112.172150 
	C290.703674,115.514542 292.419647,118.719757 293.572388,122.119522 
	C294.660461,125.328621 295.217224,128.717865 296.001709,132.012848 
	C295.995728,131.997833 296.027985,132.000381 295.692139,132.100311 
	C292.474976,139.526413 286.570312,142.167679 278.649841,142.435577 
	C278.149841,140.971069 277.675262,139.093033 276.883179,137.360153 
	C275.112671,133.486710 273.183960,129.685608 271.213379,125.512939 
	C268.062347,120.446732 265.017548,115.722618 261.972778,110.998512 
	C261.972778,110.998512 262.004730,110.997055 261.988220,110.673370 
	C261.304504,109.899902 260.637360,109.450119 259.970184,109.000336 
	C259.970184,109.000328 260.005127,108.995056 260.052765,108.647095 
	C259.057312,106.866646 258.014191,105.434166 256.971069,104.001694 
	C256.971069,104.001694 257.003662,103.997009 257.092224,103.663239 
	C254.068878,100.380455 256.256683,96.311493 254.992096,92.972084 
	C254.992096,92.972084 255.003632,93.001610 255.369949,93.015762 
	C256.488525,92.226654 257.901184,91.409782 257.884949,90.622337 
	C257.785583,85.798370 260.802826,84.569313 264.736969,83.888657 
	C267.856934,83.348877 268.492279,80.968697 267.907349,78.257317 
	C267.611786,76.887321 266.855042,75.616837 265.999969,73.564949 
	C270.065460,73.604950 271.409241,71.535469 270.380280,67.905640 
	C273.740326,68.635712 276.622742,69.208557 276.994873,64.971718 
	C276.994873,64.971718 277.002441,65.002701 277.352997,65.106110 
	C278.588898,64.786705 279.883240,64.602592 280.292236,63.901779 
	C282.687714,59.797153 285.249054,56.305595 289.897736,54.021755 
	C293.392365,52.304871 292.466827,48.145500 288.970856,47.003147 
	C288.970856,47.003147 289.004700,46.993153 288.943420,46.664413 
	C287.045837,44.152031 285.308075,41.874477 283.343048,39.813629 
	C281.689484,38.079472 279.771576,36.597370 277.970734,35.003674 
	C277.970734,35.003670 278.003906,34.995388 278.038239,34.626587 
	C276.388397,28.237539 274.818207,22.181631 272.952759,16.218077 
	C272.368347,14.349710 270.988770,12.730078 269.973114,10.996598 
	C269.973114,10.996600 270.005554,10.996403 269.988037,10.653894 
	C269.559021,9.186364 269.147552,8.061343 268.736084,6.936323 
z"/>
						<path data-name="龜山區"
      :class="{ 'active-district': targetDistrict === '龜山區' || selectedIndex === 9, 'initial-animation-10': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(9)" :fill-opacity="districtData['龜山區'] / districtData.highest"
      :fill="districtColor"
	  d="
M397.015076,73.980743 
	C396.557556,77.024643 396.719482,76.959763 400.009399,76.701263 
	C402.725952,76.487816 405.490631,76.886932 408.198212,77.612541 
	C405.492645,79.458893 405.492645,79.458893 409.786804,84.692696 
	C407.172577,85.377487 404.773468,86.005936 401.096283,86.969177 
	C404.880371,89.187096 407.602264,90.782478 410.317413,92.373871 
	C407.097046,99.305420 410.163300,103.164459 420.998932,111.527321 
	C417.216156,112.451584 414.034210,113.263588 410.833313,113.992363 
	C409.718414,114.246208 408.405304,114.004051 407.450287,114.501778 
	C405.850220,115.335686 403.463196,116.423523 403.262451,117.696938 
	C403.049255,119.049294 404.846039,120.869720 406.030518,122.259567 
	C408.457031,125.106789 411.061005,127.802727 413.284302,130.225708 
	C410.272919,132.857086 408.522888,134.799973 406.382019,136.098389 
	C405.142151,136.850342 403.247650,136.827499 401.693939,136.676819 
	C399.930298,136.505814 398.218262,135.802643 396.483795,135.330826 
	C396.053467,136.974640 395.394226,138.599457 395.255737,140.267502 
	C395.110596,142.015640 395.465210,143.805283 395.601471,145.577637 
	C391.473358,148.259583 387.581604,152.038254 382.970337,153.425659 
	C378.523743,154.763565 372.934448,154.804840 368.564392,153.313721 
	C361.893524,151.037521 355.750763,149.685120 348.942108,152.273773 
	C347.546814,152.804291 345.462524,151.522598 343.341492,151.051254 
	C342.987183,151.026260 343.031403,151.020294 343.129578,150.762131 
	C343.152466,150.335876 343.077240,150.167801 342.924805,149.778137 
	C342.613617,149.217972 342.345154,149.187897 341.693726,149.421661 
	C340.903992,149.221741 340.462738,149.066437 339.954010,148.545502 
	C337.296722,143.715256 337.805969,139.108322 340.489044,136.465836 
	C342.835663,134.154709 345.744690,131.473557 346.338959,128.537628 
	C347.309906,123.740570 346.601410,118.603592 346.601410,114.027542 
	C343.833282,113.210266 342.489319,112.813461 341.145325,112.416656 
	C341.558655,112.183533 341.971954,111.950417 342.385284,111.717293 
	C341.649323,108.926369 341.787537,104.905586 339.980682,103.621338 
	C336.971680,101.482666 332.716095,101.097809 328.988647,99.992828 
	C328.991882,100.011223 329.028595,100.004677 329.016235,99.622269 
	C326.400665,98.869095 323.797485,98.498314 320.739655,98.062782 
	C318.594971,93.006355 316.216461,87.398659 313.570618,81.160660 
	C315.309998,81.597160 316.079803,81.805206 316.856659,81.982536 
	C319.264343,82.532158 330.944275,78.939232 333.031006,77.015312 
	C333.031006,77.015312 332.997284,76.997673 333.344910,77.129181 
	C334.803040,76.515945 335.913483,75.771202 337.023956,75.026451 
	C337.023956,75.026451 337.000000,74.999695 337.317261,75.031601 
	C337.767487,74.712166 337.900482,74.360832 338.033478,74.009499 
	C338.033478,74.009499 337.996887,74.001244 338.306213,74.041290 
	C338.840424,73.756989 339.065338,73.432640 339.547668,72.895386 
	C341.233856,71.580711 342.511963,70.130432 344.117065,69.436516 
	C351.734680,66.143280 359.444336,63.068966 368.031403,63.881493 
	C374.163055,63.659901 380.323547,62.985722 386.416290,63.374214 
	C390.548462,63.637691 394.585510,65.393326 399.085785,66.593849 
	C398.409973,68.923080 397.782379,71.086227 397.072723,73.629623 
	C396.990662,74.009865 397.015076,73.980743 397.015076,73.980743 
z"/>
						<path data-name="八德區"
      :class="{ 'active-district': targetDistrict === '八德區' || selectedIndex === 10, 'initial-animation-11': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(10)" :fill-opacity="districtData['八德區'] / districtData.highest"
      :fill="districtColor"
	  d="
M327.488342,197.994019 
	C326.754700,198.676575 326.021027,199.359116 324.915466,200.471008 
	C324.349518,201.265656 324.155487,201.630951 323.961456,201.996246 
	C323.961456,201.996246 324.005157,202.000275 323.726501,202.030716 
	C323.285522,202.369415 323.123169,202.677673 322.960815,202.985931 
	C322.960815,202.985931 323.001434,203.001511 322.724548,203.031189 
	C322.285370,203.369263 322.123077,203.677658 321.960785,203.986038 
	C321.960785,203.986038 322.000397,204.005157 321.691467,204.064758 
	C321.076080,204.417191 320.769623,204.710022 320.463165,205.002869 
	C320.463165,205.002869 320.084259,205.248077 319.820557,205.582245 
	C319.358429,206.278046 319.160004,206.639694 318.961609,207.001328 
	C318.961609,207.001328 319.005493,207.000916 318.660217,207.087311 
	C314.529907,208.129730 310.744904,209.085785 306.981567,209.839050 
	C306.801270,209.607376 306.599274,209.578491 306.397308,209.549606 
	C306.609985,209.691864 306.822693,209.834122 306.871552,210.305603 
	C306.131531,210.950775 305.569550,211.296570 304.976990,211.578064 
	C298.738892,214.541367 296.985779,213.614777 294.704803,207.082031 
	C294.159302,205.519699 292.026978,204.511429 290.062836,202.742554 
	C289.523499,205.304108 289.241821,206.642059 288.960114,207.980011 
	C288.960114,207.980011 288.998169,208.003265 288.719360,208.024689 
	C288.280609,208.359879 288.120636,208.673615 287.960632,208.987366 
	C287.960632,208.987350 288.001678,209.000259 287.672974,209.084137 
	C286.217163,210.772995 285.090057,212.378006 283.962982,213.983017 
	C283.962982,213.983017 284.001038,214.002609 283.736084,214.046265 
	C283.300995,214.390945 283.130859,214.691986 282.960693,214.993042 
	C282.960693,214.993027 283.003540,215.003662 282.740936,215.052185 
	C282.305237,215.399399 282.132172,215.698074 281.959106,215.996765 
	C281.959106,215.996765 282.005249,216.002548 281.657654,216.048706 
	C280.210693,216.451096 279.111389,216.807327 277.693359,217.120544 
	C273.616699,216.558594 272.728241,214.486313 274.452209,210.957520 
	C278.337646,202.619232 284.631348,195.638855 285.579285,185.930786 
	C285.530365,182.419281 285.219452,179.215790 284.886566,175.641449 
	C284.831940,172.838852 284.799225,170.407120 284.793762,167.574493 
	C283.230743,162.691528 283.861084,158.610992 287.006958,154.987976 
	C286.989532,154.987457 286.983124,155.021713 287.340942,155.132156 
	C288.807404,154.157562 289.916077,153.072525 291.007111,151.987152 
	C290.989471,151.986832 290.980896,152.021057 291.337158,152.144882 
	C293.866852,150.493942 296.040314,148.719177 298.790131,146.473770 
	C298.790131,149.631668 298.634552,151.782959 298.838776,153.899521 
	C299.005737,155.629959 299.601898,157.318985 300.010254,159.008850 
	C300.012726,158.991318 299.978363,158.982758 299.886017,159.362213 
	C302.116852,163.214752 304.210297,166.879593 306.872742,170.069550 
	C307.987030,171.404617 310.308655,171.731979 312.081390,172.517502 
	C312.559418,172.079742 313.037476,171.641998 313.515503,171.204254 
	C312.674866,169.461212 311.834259,167.718170 310.991638,165.991486 
	C310.989685,166.007828 311.022003,166.014053 311.131104,165.639038 
	C312.510559,161.464798 312.376282,156.753571 317.614380,155.573578 
	C318.645325,159.566925 320.727966,161.475952 324.980774,158.719849 
	C325.064087,158.486862 325.032135,157.993042 325.012360,157.989990 
	C324.992584,157.986938 324.987152,158.026581 325.244080,158.184753 
	C326.004883,158.907776 326.508789,159.472656 327.015656,160.017670 
	C327.018646,159.997803 326.982758,159.981461 326.982758,159.981476 
	C332.035248,160.991409 337.087738,162.001358 343.020203,163.187210 
	C343.020203,166.161407 342.950043,170.671036 343.040466,175.177460 
	C343.126648,179.472412 343.380280,183.763977 343.563568,188.134308 
	C339.914307,190.172623 335.390442,192.699448 330.342407,195.591751 
	C329.041626,196.636169 328.264984,197.315094 327.488342,197.994019 
z"/>
						<path data-name="桃園區"
      :class="{ 'active-district': targetDistrict === '桃園區' || selectedIndex === 11, 'initial-animation-12': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(11)" :fill-opacity="districtData['桃園區'] / districtData.highest"
      :fill="districtColor"
	  d="
M342.976501,151.007019 
	C342.266052,153.877899 343.215607,157.629044 339.279022,158.882462 
	C337.335236,159.501358 335.236786,159.732605 333.188873,159.896576 
	C331.409485,160.039047 329.602783,159.839890 327.395447,159.886566 
	C326.982758,159.981461 327.018646,159.997803 327.131683,159.668396 
	C326.676575,158.396484 326.108429,157.454010 325.540253,156.511536 
	C325.355865,157.016556 325.171509,157.521561 324.987152,158.026581 
	C324.987152,158.026581 324.992584,157.986938 324.752869,157.828232 
	C324.325012,157.748154 324.136932,157.826767 323.562469,157.937531 
	C320.977600,158.181015 319.483246,157.868912 320.414581,155.005173 
	C320.594849,154.450897 319.850586,153.103683 319.268860,152.908356 
	C318.379639,152.609802 317.171234,152.775848 316.262543,153.146851 
	C315.178772,153.589340 313.867767,154.239166 313.357880,155.179993 
	C311.833344,157.992996 310.563171,160.958588 309.436401,163.955841 
	C309.275909,164.382874 310.460144,165.315445 311.022003,166.014053 
	C311.022003,166.014053 310.989685,166.007828 310.962097,166.377563 
	C310.792786,167.774597 310.651093,168.801895 310.443085,170.309891 
	C304.923309,167.841904 307.056763,159.097321 299.978363,158.982758 
	C299.978363,158.982758 300.012726,158.991318 300.044952,158.568604 
	C300.524841,153.567734 300.972504,148.989578 301.420166,144.411438 
	C300.809082,144.056458 300.198029,143.701462 299.586945,143.346481 
	C296.718262,146.238007 293.849579,149.129532 290.980896,152.021057 
	C290.980896,152.021057 290.989471,151.986832 290.672852,151.998077 
	C289.231873,153.013443 288.107483,154.017578 286.983124,155.021713 
	C286.983124,155.021713 286.989532,154.987457 286.664551,155.010406 
	C285.256653,155.564713 284.173706,156.096054 282.933838,156.704376 
	C281.972443,153.426666 280.980347,150.644974 280.407959,147.779419 
	C280.196899,146.722839 280.628235,145.130951 281.369080,144.369171 
	C283.422424,142.257812 290.198059,142.511124 292.629578,144.591156 
	C293.769287,140.368576 294.898621,136.184479 296.027985,132.000381 
	C296.027985,132.000381 295.995728,131.997833 296.356262,132.071548 
	C297.160614,130.865723 298.232697,129.405411 297.926636,128.341599 
	C297.112762,125.512779 295.730438,122.843491 294.527618,120.131401 
	C292.082733,114.618660 288.498932,109.028191 296.000000,104.423119 
	C296.478943,104.129074 296.600342,103.298973 296.977509,102.783745 
	C297.937164,101.472763 298.947571,100.198952 299.888550,98.974228 
	C302.263092,101.499016 303.976776,103.321144 305.977264,105.448204 
	C307.983856,103.285553 309.507080,101.643890 311.030334,100.002228 
	C311.030334,100.002235 310.995178,99.994087 311.268372,99.962791 
	C311.703979,99.621384 311.866394,99.311272 312.028809,99.001160 
	C312.028809,99.001152 311.995483,98.996704 312.385132,98.978638 
	C314.372589,98.680122 316.757446,97.592316 317.436493,98.254295 
	C321.018921,101.746696 325.193970,99.464127 329.028595,100.004677 
	C329.028595,100.004677 328.991882,100.011223 329.094177,100.331436 
	C332.587189,102.595901 335.977936,104.540154 340.002197,106.847664 
	C339.848846,107.617851 339.208282,109.364021 339.257416,111.090569 
	C339.291840,112.301216 339.940704,114.046944 340.875092,114.589600 
	C346.845490,118.057014 347.269379,129.835358 341.427521,133.953812 
	C334.776367,138.642838 334.239044,144.180969 340.054932,150.551453 
	C341.187256,150.896500 342.109344,150.958405 343.031403,151.020294 
	C343.031403,151.020294 342.987183,151.026260 342.976501,151.007019 
z"/>
						<path data-name="中壢區"
      :class="{ 'active-district': targetDistrict === '中壢區' || selectedIndex === 12, 'initial-animation-13': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(12)" :fill-opacity="districtData['中壢區'] / districtData.highest"
      :fill="districtColor"
	  d="
M283.335205,175.829391 
	C283.845306,179.036102 284.166931,181.967377 284.458496,185.255127 
	C283.637817,187.949844 282.710358,190.251968 282.082123,192.633041 
	C280.144470,199.977036 271.384155,207.656265 264.044800,207.870636 
	C262.574005,207.913589 261.101898,206.242996 259.551239,205.536224 
	C255.032135,203.476486 250.622513,201.295731 247.340973,197.004669 
	C246.983917,196.981918 247.008942,196.995529 247.034241,196.588943 
	C245.863831,190.504242 244.668121,184.826141 243.876877,181.068695 
	C234.967590,175.692749 226.714005,173.921417 217.655334,174.961548 
	C214.192245,172.834198 213.562683,170.299561 214.675110,166.712509 
	C215.157578,165.156769 213.971954,163.083725 213.544006,161.245651 
	C212.021774,162.170197 210.499527,163.094742 208.977295,164.019272 
	C208.977295,164.019272 208.989853,163.992310 209.003113,163.986115 
	C208.107742,163.640991 207.153671,163.389938 206.298492,162.947678 
	C202.940079,161.210876 201.264832,161.663574 200.858139,165.954544 
	C200.126236,173.676682 196.652588,175.610077 188.529419,173.031586 
	C188.064636,172.520279 187.875443,172.264420 187.409821,171.939743 
	C184.237762,170.435074 181.274536,169.049194 177.848083,167.446686 
	C179.358887,165.264526 180.795410,163.189636 182.406860,160.841980 
	C184.039124,158.805557 185.769470,157.198181 186.889633,155.241501 
	C188.560745,152.322449 189.801666,149.157104 191.383820,145.794952 
	C192.007919,143.513687 193.221512,141.358429 192.805267,139.585907 
	C191.311569,133.225220 188.857559,127.076920 187.562241,120.687027 
	C186.562500,115.755257 186.622894,110.583359 186.563797,105.514114 
	C186.555206,104.777237 188.585739,103.294243 189.543900,103.393967 
	C193.607162,103.816856 198.229752,102.768967 201.526108,107.039978 
	C202.556976,107.384361 203.248123,107.605743 204.161514,107.609299 
	C205.145798,106.404724 205.907852,105.417969 206.909012,104.121590 
	C207.716888,107.571106 208.348022,110.673042 209.188385,113.717209 
	C209.791733,115.902824 210.845581,116.721863 212.426300,113.879761 
	C213.973907,113.278000 215.326324,112.929405 216.400497,112.652527 
	C217.053635,110.129143 217.643661,107.849594 218.542877,105.390244 
	C219.925629,105.544075 221.162582,106.395332 222.043137,106.117416 
	C225.078629,105.159378 226.810349,105.569107 227.307770,109.132515 
	C228.080490,114.668228 229.066956,120.179550 230.157715,125.662430 
	C230.527115,127.519302 231.487213,129.258652 232.308502,131.392410 
	C236.995224,128.114594 236.027344,123.880974 235.747314,119.863487 
	C235.608551,117.872818 235.354355,115.890190 235.174164,113.533424 
	C235.490646,113.045273 235.731018,112.857895 236.024750,112.396889 
	C238.542892,112.813858 240.953323,113.434738 242.916595,113.940437 
	C243.086319,117.793114 242.827911,121.146271 243.469528,124.317307 
	C244.416199,128.995926 246.823792,129.053940 250.833725,126.640129 
	C255.059662,124.096298 259.999542,122.519928 264.828705,121.354118 
	C266.001953,121.070877 267.964050,124.055313 269.829163,125.759613 
	C273.392548,134.889664 276.912872,143.723618 279.895844,152.735428 
	C281.433502,157.380936 282.015167,162.342865 283.103546,167.571747 
	C283.167786,170.505768 283.157288,173.029846 283.335205,175.829391 
z"/>
<path data-name="平鎮區"
      :class="{ 'active-district': targetDistrict === '平鎮區' || selectedIndex === 13, 'initial-animation-14': true }"
      @mouseenter="toggleActive" @mousemove="updateMouseLocation" @mouseleave="toggleActiveToNull"
      @click="handleDataSelection(13)" :fill-opacity="districtData['平鎮區'] / districtData.highest"
      :fill="districtColor"
	  d="
M246.983917,196.981918 
	C247.757202,204.022507 254.771011,204.137863 258.669525,207.698578 
	C264.735718,213.239151 269.040100,206.470795 274.704193,206.452469 
	C274.376404,207.546707 274.036102,208.682785 273.512573,210.087936 
	C272.349304,211.188248 271.369171,212.019501 270.037079,213.149277 
	C274.135895,216.143936 273.682190,219.387650 272.220337,223.627945 
	C270.808868,227.722198 271.243988,232.453064 270.799652,237.344696 
	C269.924469,239.308594 269.117584,240.832092 268.245972,242.682068 
	C268.026947,245.476624 267.872650,247.944702 267.420959,250.668976 
	C265.885742,245.595398 262.539703,244.722702 257.062744,248.646408 
	C256.350220,248.872513 255.723282,248.775726 254.814484,248.544037 
	C252.959198,246.119736 251.385788,243.830338 250.457108,242.479080 
	C246.927719,242.127548 244.140472,241.738556 241.342224,241.628204 
	C240.280930,241.586349 239.208908,242.368759 238.116241,242.456146 
	C235.776611,242.643219 233.401001,242.463409 231.078186,242.746307 
	C229.690018,242.915390 228.373886,243.675949 226.898880,244.489075 
	C224.101227,245.528946 221.430054,246.250366 219.163742,246.862442 
	C217.835052,244.681763 216.714478,242.842636 215.222015,240.393143 
	C213.933945,242.013565 213.394638,243.038559 212.556107,243.659378 
	C211.503647,244.438583 210.205978,244.886581 209.014130,245.477509 
	C208.728668,244.260132 207.925629,242.886932 208.237946,241.849518 
	C211.301773,231.672379 212.674713,221.663971 211.916656,210.719376 
	C211.413162,203.450027 208.837585,197.472504 206.831375,190.697281 
	C205.140976,187.571609 202.811676,184.789841 202.465683,181.780060 
	C201.804840,176.031219 202.273788,170.152481 202.273788,164.713318 
	C205.302017,164.713318 207.027161,164.713318 208.871063,164.352814 
	C208.989853,163.992310 208.977295,164.019272 209.346893,164.118195 
	C210.638138,163.957062 211.559799,163.697006 212.695984,163.376419 
	C214.071014,167.696259 209.072128,174.102448 217.190735,176.334137 
	C224.349518,177.678787 231.424271,175.703751 238.029572,180.625122 
	C240.731995,182.638596 242.481750,183.615570 243.143539,187.033875 
	C243.811554,190.484299 245.673447,193.703598 247.010620,197.009857 
	C247.008942,196.995529 246.983917,196.981918 246.983917,196.981918 
z"/>			
					</g>
			</svg>
			<Teleport to="body">
				<!-- The class "chart-tooltip" could be edited in /assets/styles/chartStyles.css -->
				<div v-if="targetDistrict" class="Taoyuanchart-chart-info chart-tooltip" :style="tooltipPosition">
					<h6>{{ targetDistrict }}</h6>
					<span>{{ districtData[targetDistrict] }} {{ chart_config.unit }}</span>
				</div>
			</Teleport>
		</div>
	</div>
</template>

<style scoped lang="scss">
.Taoyuanchart {
	max-height: 100%;
	position: relative;
	overflow-y: scroll;

	&-title {
		display: flex;
		flex-direction: column;
		justify-content: center;
		position: absolute;
		left: 0;
		top: 0;
		margin: 0.5rem 0 -0.5rem;

		h5 {
			color: var(--color-complement-text);
		}

		h6 {
			color: var(--color-complement-text);
			font-size: var(--font-m);
			font-weight: 400;
		}

		&-legend {
			display: flex;
			justify-content: space-between;

			div {
				position: relative;
				width: 3rem;
				margin: 0 4px;
				border-radius: 5px;
			}

			div:before {
				content: "";
				width: 3rem;
				height: var(--font-l);
				position: absolute;
				top: 0;
				left: 0;
				background: linear-gradient(270deg, rgba(40, 42, 44, 1), rgba(40, 42, 44, 0.2));
			}

			p {
				color: var(--color-complement-text)
			}
		}
	}

	&-chart {
		display: flex;
		justify-content: center;

		svg {
			width: 65%;

			path {
				transition: transform 0.2s;
				opacity: 0.3;
			}
		}

		&-info {
			position: fixed;
			z-index: 20;
		}
	}

}

.active-district {
	transform: translateY(-5px);
}

@keyframes ease-in {
	0% {
		opacity: 0
	}

	;

	100% {
		opacity: 1
	}
}

@for $i from 1 through 12 {
	.initial-animation-#{$i} {
		animation-name: ease-in;
		animation-duration: 0.2s;
		animation-delay: 0.05s * ($i - 1);
		animation-timing-function: linear;
		animation-fill-mode: forwards;
	}
}
</style>